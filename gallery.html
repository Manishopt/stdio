<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gallery</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet">
<style>
  body { font-family: Arial, sans-serif; padding: 24px; background:#f4f4f6; color:#222; }
  .wrap { max-width:1200px; margin:0 auto; }
  h1 { color:#ffb6c1; }
  .grid { display:flex; flex-wrap:wrap; gap:12px; margin-top:16px; }
  .grid img { width: 280px; height: 180px; object-fit:cover; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.12); }
  .back { display:inline-block; margin-top:12px; color:#0891B2; text-decoration:none; }
</style>
</head>
<body>
  <div class="wrap">
    <a href="index.html" class="back"><i class="fas fa-arrow-left"></i> Back</a>
    <h1 id="catTitle">Gallery</h1>
    <div id="grid" class="grid"></div>
    <p id="emptyMsg" style="display:none;margin-top:18px;color:#666;">No images available for this category.</p>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
  <script>
    function getQueryParam(name) {
      const params = new URLSearchParams(location.search);
      return params.get(name);
    }

    async function loadGallery() {
      const category = getQueryParam('category') || 'Wedding';
      document.getElementById('catTitle').textContent = category;
      try {
        const res = await fetch('galleries.json', {cache:'no-cache'});
        const data = await res.json();
        const images = data[category] || [];
        const grid = document.getElementById('grid');
        if (!images.length) {
          document.getElementById('emptyMsg').style.display = 'block';
          return;
        }
        images.forEach(src => {
          const a = document.createElement('a');
          a.href = src;
          a.setAttribute('data-lightbox', category);
          const img = document.createElement('img');
          img.src = src;
          img.alt = category;
          a.appendChild(img);
          grid.appendChild(a);
        });
      } catch (e) {
        document.getElementById('emptyMsg').textContent = 'Failed to load gallery manifest.';
        document.getElementById('emptyMsg').style.display = 'block';
        console.error(e);
      }
    }

    loadGallery();
  </script>
</body>
</html>
